version: '3.7'

networks:
  network:
    name: net_1
    external: true

services:
    prometheus:
        image: prom/prometheus
        ports:
            - "9090:9090"
        networks:
            - network
        volumes:
            - './prometheus/prometheus.yml:/etc/prometheus/prometheus.yml'
        command:
            - --config.file=/etc/prometheus/prometheus.yml
    grafana:
        image: grafana/grafana
        ports:
            - "3001:3000"
        networks:
            - network
        volumes:
            - ./grafana:/var/lib/grafana
            - ./grafana/provisioning/:/etc/grafana/provisioning/
        depends_on:
            prometheus:
                condition: service_started
